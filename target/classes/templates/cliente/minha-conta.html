<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Minha Conta - Rebobinar</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Estilos rápidos para diferenciar seções */
        body { background-color: #f8f9fa; }
        .card { margin-bottom: 1.5rem; }
        .table-atrasada { background-color: #fff3cd; } /* Amarelo claro para atrasadas */
    </style>
</head>
<body>

<header th:replace="~{fragments/_header_cliente :: header}"></header>

<div class="container mt-4">
<h1 class="mb-4">Olá, <span th:text="${cliente.nome}"></span>!</h1>

<div class="card shadow-sm">
    <div class="card-header bg-danger text-white">
        <h5 class="mb-0">Locações Atrasadas</h5>
    </div>
    <div class="card-body">
        <div th:if="${#lists.isEmpty(locacoesAtrasadas)}" class="alert alert-info">
            Nenhuma locação atrasada.
        </div>
        <div th:unless="${#lists.isEmpty(locacoesAtrasadas)}" class="table-responsive">
            <table class="table table-hover table-sm table-atrasada">
                <thead>
                <tr>
                    <th>Filme</th>
                    <th>Data da Locação</th>
                    <th>Prazo Devolução</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="loc : ${locacoesAtrasadas}">
                    <td th:text="${loc.filme.nome}"></td>
                    <td th:text="${#temporals.format(loc.dataLocacao, 'dd/MM/yyyy')}"></td>
                    <td th:text="${#temporals.format(loc.dataLocacao.plusDays(7), 'dd/MM/yyyy')}"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="card shadow-sm">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0">Minhas Locações Ativas</h5>
    </div>
    <div class="card-body">
        <div th:if="${#lists.isEmpty(locacoesEmDia)}" class="alert alert-info">
            Você não possui locações ativas no momento.
        </div>
        <div th:unless="${#lists.isEmpty(locacoesEmDia)}" class="table-responsive">
            <table class="table table-hover table-sm">
                <thead>
                <tr>
                    <th>Filme</th>
                    <th>Data da Locação</th>
                    <th>Prazo Devolução</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="loc : ${locacoesEmDia}">
                    <td th:text="${loc.filme.nome}"></td>
                    <td th:text="${#temporals.format(loc.dataLocacao, 'dd/MM/yyyy')}"></td>
                    <td th:text="${#temporals.format(loc.dataLocacao.plusDays(7), 'dd/MM/yyyy')}"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="card shadow-sm">
    <div class="card-header bg-secondary text-white">
        <h5 class="mb-0">Catálogo de Filmes</h5>
    </div>
    <div class="card-body">
        <div th:if="${#lists.isEmpty(filmesDisponiveis)}" class="alert alert-warning">
            Nenhum filme disponível no momento.
        </div>
        <div th:unless="${#lists.isEmpty(filmesDisponiveis)}" class="table-responsive">
            <table class="table table-striped table-hover table-sm">
                <thead>
                <tr>
                    <th>Título</th>
                    <th>Ano</th>
                    <th>Categoria</th>
                    <th>Cópias</th>
                    <th>Oscar?</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="filme : ${filmesDisponiveis}">
                    <td th:text="${filme.nome}"></td>
                    <td th:text="${filme.anoLancamento}"></td>
                    <td th:text="${filme.categoria}"></td>
                    <td th:text="${filme.copiasDisponiveis}"></td>
                    <td th:text="${filme.vencedorOscar ? 'Sim' : 'Não'}"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>